library(RJSONIO)
x=toJSON(data.frame(date= as.Date(c("2014-05-28","2014-05-29","2014-05-30"))
,ret=1:3))
?toJSON
as.Date(c("2014-05-28","2014-05-29","2014-05-30")
)
source('~/git/siteOne/Rscript/test1.R')
library(RJSONIO)
x=toJSON(data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3))
source('~/git/siteOne/Rscript/test1.R')
now()
date()
format(Sys.time() , "%Y-%m-%d")
Sys.time()
source('~/git/siteOne/Rscript/test1.R')
source('~/git/siteOne/Rscript/test1.R')
source('~/git/siteOne/Rscript/test1.R')
source('~/git/siteOne/Rscript/test1.R')
source('~/git/siteOne/Rscript/test1.R')
?commandArgs
source('~/git/siteOne/Rscript/test1.R')
source('~/git/siteOne/Rscript/test1.R')
source('~/git/siteOne/Rscript/test1.R')
source('~/git/siteOne/Rscript/test1.R')
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,timestamp),sep="-"),".json",sep="")
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(timestamp)),sep="-"),".json",sep="")
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(timestamp)),sep="-"),".json",sep="")
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(timestamp)),sep="-"),".json",sep="")
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestampe)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(timestamp)),sep="-"),".json",sep="")
write(write2Json,jsonName)
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestamp)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(timestamp)),sep="-"),".json",sep="")
write(write2Json,jsonName)
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestamp)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,timestamp),sep="-"),".json",sep="")
write(write2Json,jsonName)
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestamp)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,timestamp),sep="-"),".json",sep="")
write(write2Json,jsonName)
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestamp)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,timestamp),sep="-"),".json",sep="")
write(write2Json,jsonName)
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestamp)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(timestamp,0)),sep="-"),".json",sep="")
write(write2Json,jsonName)
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestamp)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(timestamp,0)),sep="-"),".json",sep="")
write(write2Json,jsonName)
timestamp=Sys.time()
cat(timestampe)
cat(timestamp)
timestamp
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestamp)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(as.numeric(timestamp),0)),sep="-"),".json",sep="")
write(write2Json,jsonName)
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestamp)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(as.numeric(timestamp),0)),sep="-"),".json",sep="")
write(write2Json,jsonName)
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestamp)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(as.numeric(timestamp),0)),sep="-"),".json",sep="")
write(write2Json,jsonName)
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
cat(timestamp)
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(as.numeric(timestamp),0)),sep="-"),".json",sep="")
write(write2Json,jsonName)
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=data, timestamp=toString(timestamp),
args=args ))
jsonName=paste(paste(c(args,round(as.numeric(timestamp),0)),sep="-"),".json",sep="")
write(write2Json,jsonName)
data
toJSON(data)
toJSON(t(data)
)
?toJSON
names(data)
toJSON(t(data),pretty=T)
toJSON(data,pretty=T)
list(data)
toJSON(list(data),pretty=T)
json <-function(tmp){
list(traits = colnames(tmp),
values = unname(apply(tmp, 1, function(x) as.data.frame(t(x))))
)
cat(json(data))
}
json <-function(tmp){
list(traits = colnames(tmp),values = unname(apply(tmp, 1, function(x) as.data.frame(t(x)))))
}
cat(json(data))
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unname(apply(tmp, 1, function(x) as.data.frame(t(x)))))
}
preJSON(data)
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unname(apply(tmp, 1, function(x) as.data.frame(t(x)))))
}
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=preJSON(data), timestamp=toString(timestamp),
args=args ))
jsonName=paste('returns/',args[4],'.json',sep="")
write(write2Json,jsonName)
data
preJSON(data)
identity
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unname(apply(tmp, 1, identity)))
}
preJSON(data)
t(data[1,])
unname(apply(data, 1, function(x) t(x)))
apply(data, 1, function(x) t(x))
apply(data, 1, function(x) as.data.frame(t(x)))
apply(data, 1, function(x) as.data.frame(t(x)))
?unname
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unname(apply(tmp, 1, function(x) as.data.frame(t(x))))
}
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=preJSON(data), timestamp=toString(timestamp),
args=args ), pretty=T)
jsonName=paste('returns/',args[4],'.json',sep="")
write(write2Json,jsonName)
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unname(apply(tmp, 1, function(x) as.data.frame(t(x)))))
}
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=preJSON(data), timestamp=toString(timestamp),
args=args ), pretty=T)
jsonName=paste('returns/',args[4],'.json',sep="")
write(write2Json,jsonName)
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unname(apply(tmp, 1, function(x) as.data.frame(t(x)))))
}
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=preJSON(data), timestamp=toString(timestamp),
args=args ), pretty=T)
jsonName=paste('returns/',args[4],'.json',sep="")
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unname(apply(tmp, 1, function(x) as.list(t(x)))))
}
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=preJSON(data), timestamp=toString(timestamp),
args=args ), pretty=T)
jsonName=paste('returns/',args[4],'.json',sep="")
write2JSON
write2Json
b=1:3
names(b)=1:#
names(b)=1:3
b
as.vector(data[1,])
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unname(apply(tmp, 1, function(x) as.vector(t(x)))))
}
data=data.frame(date= c("2014-05-28","2014-05-29","2014-05-30")
,ret=1:3)
timestamp=Sys.time()
write2Json=toJSON(list(data=preJSON(data), timestamp=toString(timestamp),
args=args ), pretty=T)
jsonName=paste('returns/',args[4],'.json',sep="")
t(data)
toJSON(t(data))
list(t(data[1,]))
toJson(list(t(data[1,])))
toJSON(list(t(data[1,])))
toJSON(list(t(data[1,]),name=names(x)))
?list
?as.list
y=list(data[1,])
y
toJSON(y)
toJSON(data[1,])
apply(data,1,list)
unlist(apply(data,1,list))
unlist(apply(data,1,list),recursive=F)
list(unlist(apply(data,1,list),recursive=F))
list(unlist(apply(data,1,list),recursive=F))
data=data.frame(date= c("05/28/2014","05/29/2014","05/30/2014","05/31/2014")
,ret=1:4)
data
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unlist(apply(tmp,1,list),recursive=F))
}
data=data.frame(date= c("05/28/2014","05/29/2014","05/30/2014","05/31/2014")
,ret=1:4)
timestamp=Sys.time()
write2Json=toJSON(list(data=preJSON(data), timestamp=toString(timestamp),
args=args ), pretty=T)
jsonName=paste('returns/',args[4],'.json',sep="")
write(write2Json,jsonName)
jsonName='test1.json'
write(write2Json,jsonName)
setwd('~/git/siteOne/Rscript/')
library(RJSONIO)
args <- commandArgs(T)
source("VixHedgeLib.R")
####################################################
param  <- list(StartDate ="2013-06-01",freq="d",
tickers =c("SPY","^VIX","VXX","XIV"),
EndDate=format(Sys.time() , "%Y-%m-%d"))
attach.all(param,T)
a <- getStock(tickers,StartDate,EndDate,freq)
Volume <- a[[2]]
a<- a[[1]]
a <- na.exclude(AddTest(a,T))
names(a)[-1]= c("SPY","VIX","VXX","XIV")
r<- data.frame(date=as.Date(a[,1]),r=apply(a[,-1],2,getReturns))
bookS<- main(shortMethod)
bookL<- main(longMethod)
timestamp=format(Sys.time(),"%Y%m%d%h%m%s")
timestamp
timestamp=format(Sys.time(),"%Y%m%d%H%M%S")
timestamp
paste('.//returns/VIXhedgebook',timestamp,'.book',sep='')
save(bookS, bookL, file=paste('.//returns/VIXhedgebook',timestamp,'.book',sep=''))
save(bookS, bookL, file=paste('.//returns/VIXhedgebook',timestamp,'.book',sep=''))
args
EndDate
head(bookS)
datestamp=format(Sys.time(),"%Y%m%d")
timestamp=format(Sys.time(),"%Y%m%d%H%M%S")
save(bookS, bookL, file=paste('.//returns/VIXhedgebook',timestamp,'.book',sep=''))
save.image(paste('.//returns/VIXhedgebook',datestamp,'.RData',sep=''))
data=data.frame(date=bookS[,1],shortVol=cumsum(bookS[,4]),longVol=cumsum(bookS[,4]))
data
data=data.frame(date=bookS[,1],shortVol=cumsum(bookS[,4]/100),longVol=cumsum(bookL[,4]/100))
load(paste('.//returns/VIXhedgebook',datestamp,'.RData',sep=''))
a<- AddTest(a,T)
r<- data.frame(date=as.Date(a[,1]),r=apply(a[,-1],2,getReturns))
S <-today(bookS,shortMethod)
source("VixHedgeLib.R")
S <-today(bookS,shortMethod)
L <- today(bookL,longMethod)
S
S <- tail(today(bookS,shortMethod),1)
s
S
S[1]
list('short'=S)
list('short'=S,'long'=L)
list('short'=S,'long'=L)
S <- tail(today(bookS,shortMethod),1)
L <- tail(today(bookL,longMethod),1)
list('short'=S,'long'=L)
data=list('short'=S,'long'=L)
data
list(data=preJSON(data), timestamp=toString(Sys.time()),
args=args
)
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unlist(apply(tmp,1,list),recursive=F))
}
list(data=preJSON(data), timestamp=toString(Sys.time()),
args=args)
data=data.frame('short'=S,'long'=L)
list(data=preJSON(data), timestamp=toString(Sys.time()),
args=args)
toJSON(list(data=preJSON(data), timestamp=toString(Sys.time()),
args=args ), pretty=T)
bookS
data=data.frame(date=bookS[,1],shortVol=cumsum(bookS[,4]/100),longVol=cumsum(bookL[,4]/100))
data
rm(list=ls())
library(RJSONIO)
args <- commandArgs(T)
source("VixHedgeLib.R")
options(warn=-1,digits=8);
####################################################
datestamp=format(Sys.time(),"%Y%m%d")
timestamp=format(Sys.time(),"%Y%m%d%H%M%S")
preJSON <-function(tmp){
list(traits = colnames(tmp),values = unlist(apply(tmp,1,list),recursive=F))
}
param  <- list(StartDate ="2010-06-01",freq="d",
tickers =c("SPY","^VIX","VXX","XIV"),
EndDate=format(Sys.time() , "%Y-%m-%d"))
attach.all(param,T)
a <- getStock(tickers,StartDate,EndDate,freq)
Volume <- a[[2]]
a<- a[[1]]
a <- na.exclude(AddTest(a,T))
names(a)[-1]= c("SPY","VIX","VXX","XIV")
r<- data.frame(date=as.Date(a[,1]),r=apply(a[,-1],2,getReturns))
bookS<- main(shortMethod)
